<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
    <div class="position-sticky pt-3">
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link <%= title.includes('Dashboard') ? 'active' : '' %>" href="/dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link <%= title.includes('Map') ? 'active' : '' %>" href="/dashboard/map">
                    <i class="fas fa-map-marked-alt"></i>
                    Map View
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link <%= title.includes('Analytics') ? 'active' : '' %>" href="/dashboard/analytics">
                    <i class="fas fa-chart-line"></i>
                    Analytics
                </a>
            </li>
        </ul>

        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
            <span>Controller Management</span>
        </h6>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link <%= title.includes('Controllers') ? 'active' : '' %>" href="/controllers">
                    <i class="fas fa-microchip"></i>
                    My Controllers
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/controllers/bind">
                    <i class="fas fa-plus"></i>
                    Bind Controller
                </a>
            </li>
        </ul>

        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
            <span>User Settings</span>
        </h6>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link <%= title.includes('Profile') ? 'active' : '' %>" href="/users/profile">
                    <i class="fas fa-user"></i>
                    Profile
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link <%= title.includes('Security') ? 'active' : '' %>" href="/users/security">
                    <i class="fas fa-shield-alt"></i>
                    Security
                </a>
            </li>
        </ul>

        <% if (user.role === 'admin') { %>
        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
            <span>Administration</span>
        </h6>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link <%= title.includes('Admin Panel') ? 'active' : '' %>" href="/admin">
                    <i class="fas fa-cogs"></i>
                    Admin Panel
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link <%= title.includes('User Management') ? 'active' : '' %>" href="/admin/users">
                    <i class="fas fa-users"></i>
                    User Management
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link <%= title.includes('System Controllers') ? 'active' : '' %>" href="/admin/controllers">
                    <i class="fas fa-server"></i>
                    System Controllers
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link <%= title.includes('UI Customization') ? 'active' : '' %>" href="/admin/ui-customization">
                    <i class="fas fa-palette"></i>
                    UI Customization
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link <%= title.includes('Addon Management') ? 'active' : '' %>" href="/admin/addons">
                    <i class="fas fa-puzzle-piece"></i>
                    Addon Management
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link <%= title.includes('System Settings') ? 'active' : '' %>" href="/admin/settings">
                    <i class="fas fa-sliders-h"></i>
                    System Settings
                </a>
            </li>
        </ul>
        <% } %>

        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
            <span>Help & Support</span>
        </h6>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link" href="/help/documentation" target="_blank">
                    <i class="fas fa-book"></i>
                    Documentation
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/help/api" target="_blank">
                    <i class="fas fa-code"></i>
                    API Reference
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/help/support">
                    <i class="fas fa-life-ring"></i>
                    Support
                </a>
            </li>
        </ul>
    </div>
</nav>