/* Bootstrap JavaScript Functionality */
(function() {
  'use strict';

  // Bootstrap Alert functionality
  function Alert(element) {
    this._element = element;
    this._bindEvents();
  }

  Alert.prototype._bindEvents = function() {
    var self = this;
    var closeButtons = this._element.querySelectorAll('[data-bs-dismiss="alert"]');
    
    Array.prototype.forEach.call(closeButtons, function(button) {
      button.addEventListener('click', function(e) {
        e.preventDefault();
        self.close();
      });
    });
  };

  Alert.prototype.close = function() {
    var self = this;
    this._element.classList.remove('show');
    this._element.classList.add('fade');
    
    setTimeout(function() {
      if (self._element.parentNode) {
        self._element.parentNode.removeChild(self._element);
      }
    }, 150);
  };

  // Bootstrap Tooltip functionality (simplified)
  function Tooltip(element, options) {
    this._element = element;
    this._options = options || {};
    this._bindEvents();
  }

  Tooltip.prototype._bindEvents = function() {
    var self = this;
    
    this._element.addEventListener('mouseenter', function() {
      self.show();
    });
    
    this._element.addEventListener('mouseleave', function() {
      self.hide();
    });
  };

  Tooltip.prototype.show = function() {
    var title = this._element.getAttribute('title') || this._element.getAttribute('data-bs-original-title');
    if (!title) return;
    
    if (!this._tooltip) {
      this._tooltip = document.createElement('div');
      this._tooltip.className = 'tooltip';
      this._tooltip.innerHTML = '<div class="tooltip-inner">' + title + '</div>';
      document.body.appendChild(this._tooltip);
    }
    
    var rect = this._element.getBoundingClientRect();
    this._tooltip.style.position = 'absolute';
    this._tooltip.style.top = (rect.top - this._tooltip.offsetHeight - 5) + 'px';
    this._tooltip.style.left = (rect.left + rect.width / 2 - this._tooltip.offsetWidth / 2) + 'px';
    this._tooltip.style.visibility = 'visible';
    this._tooltip.style.opacity = '1';
  };

  Tooltip.prototype.hide = function() {
    if (this._tooltip) {
      this._tooltip.style.visibility = 'hidden';
      this._tooltip.style.opacity = '0';
    }
  };

  // Bootstrap Dropdown functionality (simplified)
  function Dropdown(element) {
    this._element = element;
    this._menu = element.nextElementSibling;
    this._bindEvents();
  }

  Dropdown.prototype._bindEvents = function() {
    var self = this;
    
    this._element.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      self.toggle();
    });
    
    document.addEventListener('click', function() {
      self.hide();
    });
  };

  Dropdown.prototype.toggle = function() {
    if (this._menu.classList.contains('show')) {
      this.hide();
    } else {
      this.show();
    }
  };

  Dropdown.prototype.show = function() {
    this._menu.classList.add('show');
  };

  Dropdown.prototype.hide = function() {
    this._menu.classList.remove('show');
  };

  // Auto-initialize components
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize alerts
    var alerts = document.querySelectorAll('.alert');
    Array.prototype.forEach.call(alerts, function(alert) {
      new Alert(alert);
    });

    // Initialize tooltips
    var tooltips = document.querySelectorAll('[data-bs-toggle="tooltip"]');
    Array.prototype.forEach.call(tooltips, function(tooltip) {
      new Tooltip(tooltip);
    });

    // Initialize dropdowns
    var dropdowns = document.querySelectorAll('[data-bs-toggle="dropdown"]');
    Array.prototype.forEach.call(dropdowns, function(dropdown) {
      new Dropdown(dropdown);
    });
  });

  // Global Bootstrap object
  window.bootstrap = {
    Alert: Alert,
    Tooltip: Tooltip,
    Dropdown: Dropdown
  };

})();

/* Additional CSS for components */
var style = document.createElement('style');
style.textContent = `
  .tooltip {
    position: absolute;
    z-index: 1070;
    display: block;
    margin: 0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
    font-style: normal;
    font-weight: 400;
    line-height: 1.5;
    text-align: left;
    text-decoration: none;
    text-shadow: none;
    text-transform: none;
    letter-spacing: normal;
    word-break: normal;
    word-spacing: normal;
    white-space: normal;
    line-break: auto;
    font-size: 0.875rem;
    word-wrap: break-word;
    opacity: 0;
    transition: opacity 0.15s linear;
  }
  
  .tooltip-inner {
    max-width: 200px;
    padding: 0.25rem 0.5rem;
    color: #fff;
    text-align: center;
    background-color: #000;
    border-radius: 0.375rem;
  }
  
  .dropdown-menu {
    position: absolute;
    z-index: 1000;
    display: none;
    min-width: 10rem;
    padding: 0.5rem 0;
    margin: 0;
    font-size: 1rem;
    color: #212529;
    text-align: left;
    list-style: none;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid rgba(0, 0, 0, 0.15);
    border-radius: 0.375rem;
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.175);
  }
  
  .dropdown-menu.show {
    display: block;
  }
  
  .dropdown-item {
    display: block;
    width: 100%;
    padding: 0.25rem 1rem;
    clear: both;
    font-weight: 400;
    color: #212529;
    text-align: inherit;
    text-decoration: none;
    white-space: nowrap;
    background-color: transparent;
    border: 0;
  }
  
  .dropdown-item:hover {
    color: #1e2125;
    background-color: #e9ecef;
  }
  
  .dropdown-divider {
    height: 0;
    margin: 0.5rem 0;
    overflow: hidden;
    border-top: 1px solid rgba(0, 0, 0, 0.15);
  }
`;
document.head.appendChild(style);